(function(){var a=a||{};a.scope={};a.ASSUME_ES5=!1;a.ASSUME_NO_NATIVE_MAP=!1;a.ASSUME_NO_NATIVE_SET=!1;a.defineProperty=a.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,c,d){b!=Array.prototype&&b!=Object.prototype&&(b[c]=d.value)};a.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};a.global=a.getGlobal(this);a.SYMBOL_PREFIX="jscomp_symbol_";
a.initSymbol=function(){a.initSymbol=function(){};a.global.Symbol||(a.global.Symbol=a.Symbol)};a.Symbol=function(){var b=0;return function(c){return a.SYMBOL_PREFIX+(c||"")+b++}}();a.initSymbolIterator=function(){a.initSymbol();var b=a.global.Symbol.iterator;b||(b=a.global.Symbol.iterator=a.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&a.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return a.arrayIterator(this)}});a.initSymbolIterator=function(){}};
a.arrayIterator=function(b){var c=0;return a.iteratorPrototype(function(){return c<b.length?{done:!1,value:b[c++]}:{done:!0}})};a.iteratorPrototype=function(b){a.initSymbolIterator();b={next:b};b[a.global.Symbol.iterator]=function(){return this};return b};a.makeIterator=function(b){a.initSymbolIterator();a.initSymbol();a.initSymbolIterator();var c=b[Symbol.iterator];return c?c.call(b):a.arrayIterator(b)};a.arrayFromIterator=function(b){for(var c,d=[];!(c=b.next()).done;)d.push(c.value);return d};
var e={},f=window.Dropbox;function g(){var b={};location.hash.replace(/^#/,"").split("&").map(function(b){return b.split("=")}).forEach(function(c){var d=a.makeIterator(c);c=d.next().value;d=a.arrayFromIterator(d);b[decodeURIComponent(c)]=decodeURIComponent(d.join("="))});return b}e.ClientStorage=function(b,c){var d=c.accessToken,h=c.clientId;c=c.saveAccessToken;null==d&&(d=g().access_token)&&c&&c(d);this.db=new f.Dropbox({accessToken:d,clientId:h});this.path=b};
e.ClientStorage.prototype.authenticated=function(){return this.db.getAccessToken()?this.db.usersGetSpaceUsage(void 0).then(function(){return!0}).catch(function(){return!1}):Promise.resolve(!1)};e.ClientStorage.prototype.authenticationUrl=function(b){return this.db.getAuthenticationUrl(b)};window.ClientStorage=e.ClientStorage;})()